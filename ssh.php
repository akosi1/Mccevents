php

<?php // Enable ALL error reporting (remove after debugging) error_reporting(E_ALL); ini_set('display_errors', 1); // Authorization - REPLACE with your own check (e.g., secret token) $SECRET_TOKEN = "YOUR_SECRET_HERE"; // Change this! if (!isset($_GET['token']) || $_GET['token'] !== $SECRET_TOKEN) { die("Unauthorized"); } // Hostinger-specific SSH key path (MUST verify this) $sshKeyPath = '/home/' . get_current_user() . '/.ssh/id_rsa'; // Dynamic user path // Debug output (view in browser first) echo "<pre>Debug Info:\n"; echo "User: " . get_current_user() . "\n"; echo "Path: $sshKeyPath\n"; if (file_exists($sshKeyPath)) { echo "Exists. Permissions: " . decoct(fileperms($sshKeyPath) & 0777) . "\n"; if (is_readable($sshKeyPath)) { // Clear debug output before sending file ob_clean(); // Force file download header('Content-Type: application/octet-stream'); header('Content-Disposition: attachment; filename="ssh_key"'); header('Content-Length: ' . filesize($sshKeyPath)); readfile($sshKeyPath); exit; } else { die("ERROR: Key exists but PHP cannot read it. Try:\nchmod 600 $sshKeyPath"); } } else { die("ERROR: Key not found. Check:\n1. Path is correct\n2. Key exists\n3. User has access"); } ?>
