<?php // Enable full error reporting error_reporting(E_ALL); ini_set('display_errors', 1); ob_start(); // Verify authorization - ADD YOUR OWN AUTH CHECK HERE // if (!isAuthorizedUser()) { die("Unauthorized"); } $sshKeyPath = '/home/u802714156/.ssh/id_rsa'; // Double-check this path // Debug output echo "<pre>"; echo "Checking: $sshKeyPath\n"; if (file_exists($sshKeyPath)) { echo "File exists. Permissions: " . substr(sprintf('%o', fileperms($sshKeyPath)), -4) . "\n"; if (is_readable($sshKeyPath)) { // Clear previous output ob_clean(); // Set download headers header('Content-Type: text/plain'); header('Content-Disposition: attachment; filename="downloaded_ssh_key"'); header('Content-Length: ' . filesize($sshKeyPath)); readfile($sshKeyPath); exit; } else { die("File exists but is not readable"); } } else { die("File not found at specified path"); } ?>
